<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>Mapa con GPS</title>

<link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css"/>
<script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>

<style>
body { margin:0; }
#map { width:100vw; height:100vh; }
</style>
</head>

<body>

<div id="map"></div>

<script>

const map = L.map('map').setView([0,0], 2);

L.tileLayer('https://tile.openstreetmap.org/{z}/{x}/{y}.png', {
  maxZoom: 19
}).addTo(map);

let marker;

// GPS seguimiento
if(navigator.geolocation){

  navigator.geolocation.watchPosition(pos=>{

    const lat = pos.coords.latitude;
    const lng = pos.coords.longitude;

    map.setView([lat,lng], 18);

    if(!marker){
      marker = L.circleMarker([lat,lng],{
        radius:8,
        color:"blue",
        fillColor:"blue",
        fillOpacity:0.8
      }).addTo(map);
    } else {
      marker.setLatLng([lat,lng]);
    }

  }, err=>{
    alert("GPS error: " + err.message);
  }, {
    enableHighAccuracy:true
  });

} else {
  alert("Tu navegador no soporta GPS");
}

</script>

</body>
</html>
